define("aiprovider_datacurso/webservice_config",["exports","core/ajax","core/notification","core/str"],(function(_exports,_ajax,_notification,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * AMD module to handle the Webservice configuration actions for Datacurso.
   * It performs setup, token regeneration, and registration calls and
   * displays progress via UI notifications and a simple log list.
   *
   * @module      aiprovider_datacurso/webservice_config
   * @copyright   2025 Wilber Narvaez <wilber@buendata.com>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.default=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);const log=function(msg){let type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const list=document.getElementById("dc-ws-log");if(!list)return;const li=document.createElement("li");li.textContent=msg,li.classList.add("mb-1"),"success"===type?li.classList.add("text-success"):"error"===type?li.classList.add("text-danger"):li.classList.add("text-muted"),list.appendChild(li)},handleAction=async action=>{try{let methodname;if("setup"===action){methodname="aiprovider_datacurso_webservice_setup";const message=await(0,_str.get_string)("ws_step_setup","aiprovider_datacurso");log(message)}else if("regenerate"===action){methodname="aiprovider_datacurso_webservice_regenerate_token";const message=await(0,_str.get_string)("ws_step_token_regenerating","aiprovider_datacurso");log(message)}else{if("retry"!==action)return;{methodname="aiprovider_datacurso_webservice_setup";const message=await(0,_str.get_string)("ws_step_token_retry","aiprovider_datacurso");log(message)}}const res=await(methodname=>_ajax.default.call([{methodname:methodname,args:{}}])[0])(methodname);res.messages&&Array.isArray(res.messages)&&res.messages.forEach((m=>log(m))),_notification.default.addNotification({message:"Done: "+action,type:"success"})}catch(e){_notification.default.exception(e),log("Error: "+(e.message||e),"error")}},init=()=>{const container=document.querySelector(".aiprovider-datacurso-webservice");container&&container.addEventListener("click",(ev=>{const btn=ev.target.closest("button[data-action]");if(!btn)return;ev.preventDefault();const action=btn.getAttribute("data-action");handleAction(action)}))};_exports.init=init;var _default={init:init};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=webservice_config.min.js.map