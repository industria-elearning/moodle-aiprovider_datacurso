{"version":3,"file":"consumption.min.js","sources":["../src/consumption.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * TODO describe module consumption\n *\n * @module     aiprovider_datacurso/consumption\n * @copyright  2025 Industria Elearning <info@industriaelearning.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\n/* eslint-disable */\n\nimport Ajax from 'core/ajax';\nimport { get_string as getString } from 'core/str';\n\nexport const init = () => {\n    console.log(\"history consume\")\n    const tableBody = document.getElementById('consumption-table-body');\n\n    Ajax.call([{\n        methodname: 'aiprovider_datacurso_get_consumption_history',\n        args: {}\n    }])[0].then(async (response) => {\n        tableBody.innerHTML = '';\n\n        console.log(\"respuesta\", response)\n        // Validamos la estructura\n        const consumos = response?.consumos || [];\n\n        console.log(\"consumo\", consumos)\n\n        if (consumos.length === 0) {\n            const nodata = await getString('nodata', 'aiprovider_datacurso');\n            tableBody.innerHTML = `<tr><td colspan=\"6\">${nodata}</td></tr>`;\n            return;\n        }\n\n        consumos.forEach(item => {\n            const row = document.createElement('tr');\n            row.innerHTML = `\n            <td>${item.id_consumo}</td>\n            <td>${item.id_usuario}</td>\n            <td>${item.accion}</td>\n            <td>${item.cantidad_tokens}</td>\n            <td>${item.saldo_restante}</td>\n            <td>${item.fecha}</td>\n        `;\n            tableBody.appendChild(row);\n        });\n    }).catch(async (error) => {\n        const nodata = await getString('nodata', 'aiprovider_datacurso');\n        tableBody.innerHTML = `<tr><td colspan=\"6\">${nodata}</td></tr>`;\n    });\n\n};"],"names":["console","log","tableBody","document","getElementById","call","methodname","args","then","async","innerHTML","response","consumos","length","forEach","item","row","createElement","id_consumo","id_usuario","accion","cantidad_tokens","saldo_restante","fecha","appendChild","nodata","catch"],"mappings":";;;;;;;oJA6BoB,KAChBA,QAAQC,IAAI,yBACNC,UAAYC,SAASC,eAAe,wCAErCC,KAAK,CAAC,CACPC,WAAY,+CACZC,KAAM,MACN,GAAGC,MAAKC,MAAAA,WACRP,UAAUQ,UAAY,GAEtBV,QAAQC,IAAI,YAAaU,gBAEnBC,UAAWD,MAAAA,gBAAAA,SAAUC,WAAY,MAEvCZ,QAAQC,IAAI,UAAWW,UAEC,IAApBA,SAASC,OAMbD,SAASE,SAAQC,aACPC,IAAMb,SAASc,cAAc,MACnCD,IAAIN,sCACEK,KAAKG,6CACLH,KAAKI,6CACLJ,KAAKK,yCACLL,KAAKM,kDACLN,KAAKO,iDACLP,KAAKQ,yBAEXrB,UAAUsB,YAAYR,mBAfhBS,aAAe,mBAAU,SAAU,wBACzCvB,UAAUQ,wCAAmCe,yBAgBlDC,OAAMjB,MAAAA,cACCgB,aAAe,mBAAU,SAAU,wBACzCvB,UAAUQ,wCAAmCe"}